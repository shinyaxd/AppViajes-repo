<div class="formulario-container">
  <h2>ğŸ›ï¸ Publicar nuevo hotel</h2>

  <!-- âš ï¸ Mensajes de Ã©xito o error -->
  <div *ngIf="mensajeExito" class="alert alert-success">
    {{ mensajeExito }}
  </div>

  <div *ngIf="mensajeError" class="alert alert-danger">
    {{ mensajeError }}
  </div>

  <!-- ========================= -->
  <!-- FORMULARIO PRINCIPAL -->
  <!-- ========================= -->
  <form [formGroup]="hotelForm" (ngSubmit)="onSubmit()" class="hotel-form">

    <!-- âœ… Agrupamos los campos del hotel -->
    <div formGroupName="hotel" class="form-section">
      <h3>ğŸ¨ Datos del Hotel</h3>

      <label>
        Nombre:
        <input type="text" formControlName="nombre" placeholder="Nombre del hotel" required />
      </label>

      <label>
        DescripciÃ³n:
        <textarea formControlName="descripcion" placeholder="Describe tu hotel" required></textarea>
      </label>

      <label>
        DirecciÃ³n:
        <input type="text" formControlName="direccion" placeholder="DirecciÃ³n completa" required />
      </label>

      <div class="inline-group">
        <label>
          Ciudad:
          <input type="text" formControlName="ciudad" placeholder="Ciudad" required />
        </label>

        <label>
          PaÃ­s:
          <input type="text" formControlName="pais" placeholder="PaÃ­s" required />
        </label>
      </div>

      <label>
        Estrellas:
        <input type="number" formControlName="estrellas" min="1" max="5" required />
      </label>

      <label>
        Imagen principal (URL):
        <input type="text" formControlName="imagen_url" placeholder="https://ejemplo.com/hotel.jpg" />
      </label>

      <!-- ğŸ‘‡ GalerÃ­a de imÃ¡genes -->
      <div class="galeria">
        <h4>GalerÃ­a de imÃ¡genes</h4>

        <!-- âœ… Sin 'as FormArray' (ya se maneja en el TS) -->
        <div *ngFor="let imgCtrl of galeriaImagenes?.controls; let i = index">
          <input [formControl]="imgCtrl" placeholder="https://imagen.jpg" />
          <button type="button" (click)="eliminarImagen(i)">ğŸ—‘ï¸</button>
        </div>

        <input #nuevaImagen placeholder="URL de nueva imagen" />
        <button
          type="button"
          (click)="agregarImagen(nuevaImagen.value); nuevaImagen.value=''"
        >
          â• Agregar imagen
        </button>
      </div>
    </div>

    <!-- ========================= -->
    <!-- HABITACIONES DINÃMICAS -->
    <!-- ========================= -->
    <div formArrayName="habitaciones" class="form-section">
      <h3>ğŸ›ï¸ Habitaciones</h3>

      <!-- âœ… Usa el getter 'habitaciones' -->
      <div
        *ngFor="let habitacion of habitaciones?.controls; let i = index"
        [formGroupName]="i"
        class="habitacion-card"
      >
        <h4>HabitaciÃ³n {{ i + 1 }}</h4>

        <label>
          Nombre:
          <input type="text" formControlName="nombre" placeholder="Ej. Suite Deluxe" />
        </label>

        <label>
          DescripciÃ³n:
          <textarea
            formControlName="descripcion"
            placeholder="Detalles de la habitaciÃ³n"
          ></textarea>
        </label>

        <div class="inline-group">
          <label>
            Capacidad adultos:
            <input type="number" formControlName="capacidad_adultos" min="1" />
          </label>

          <label>
            Capacidad niÃ±os:
            <input type="number" formControlName="capacidad_ninos" min="0" />
          </label>
        </div>

        <div class="inline-group">
          <label>
            Precio por noche (USD):
            <input type="number" formControlName="precio_por_noche" min="0" />
          </label>

          <label>
            Cantidad disponible:
            <input type="number" formControlName="cantidad" min="1" />
          </label>
        </div>

        <button type="button" class="btn-remove" (click)="eliminarHabitacion(i)">
          âŒ Eliminar
        </button>
      </div>

      <button type="button" class="btn-add" (click)="agregarHabitacion()">
        â• Agregar habitaciÃ³n
      </button>
    </div>

    <!-- ========================= -->
    <!-- BOTÃ“N DE ENVÃO -->
    <!-- ========================= -->
    <button
      type="submit"
      class="btn-submit"
      [disabled]="hotelForm.invalid || enviando"
    >
      {{ enviando ? 'Enviando...' : 'Publicar hotel' }}
    </button>
  </form>
</div>
