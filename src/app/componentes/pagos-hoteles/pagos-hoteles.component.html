<div class="main-wrapper">
    <div class="pago-card">
        
        <div class="header">
            <h1>ConfirmaciÃ³n de Reserva</h1>
            <p>Revisa los detalles y el precio final antes de proceder al pago.</p>
        </div>

        <div *ngIf="reservaExitosa" class="success-message">
            <h2>Â¡Reserva Exitosa! ðŸŽ‰</h2>
            <p>El proceso de pago y reserva se ha completado. RecibirÃ¡s los detalles en tu correo.</p>
            <button class="boton-inicio" [routerLink]="['/hoteles']">Volver a Hoteles</button>
        </div>

        <div *ngIf="!reservaExitosa" class="secciones-flex-container">
            
            <div class="seccion-reserva detalle-columna">
                <h2><i class="fas fa-building"></i> {{ nombreHotel }}</h2>
                <p class="ubicacion">{{ ubicacion }}</p>
                
                <div class="fechas-reserva">
                    <div class="fecha-item">
                        <label>CHECK IN</label>
                        <p class="fecha-valor">{{ checkIn | date:'EEE, MMM d, y' }}</p>
                    </div>
                    <div class="separador-fechas">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                    <div class="fecha-item">
                        <label>CHECK OUT</label>
                        <p class="fecha-valor">{{ checkOut | date:'EEE, MMM d, y' }}</p>
                    </div>
                </div>

                <div class="divider"></div> 

                <h3><i class="fas fa-user-friends"></i> HuÃ©spedes y Filtros</h3>
                <div class="huespedes-resumen">
                    <p>Adultos totales: <strong>{{ adultosReservados }}</strong></p>
                    <p>NiÃ±os totales: <strong>{{ ninosReservados }}</strong></p>
                    <p>Habitaciones solicitadas: <strong>{{ habitacionesSolicitadas }}</strong></p>
                </div>
            </div>
            
            <div class="seccion-precio detalle-columna">
                <h3><i class="fas fa-bed"></i> Habitaciones Reservadas</h3>
                
                <p class="cantidad">Total de cuartos: <strong>{{ cantidadTotalCuartos }}</strong></p>
                
                <div *ngFor="let reserva of reservas" class="detalle-reserva-multiple">
                    <p class="tipo-cuarto">
                        <strong>{{ reserva.cantidad }}x {{ reserva.tipo }}</strong>
                        <span class="precio-unitario">{{ reserva.precioNoche | currency:'PEN':'symbol':'1.2-2' }} / noche</span>
                    </p>
                </div>

                <div class="divider"></div>

                <h3><i class="fas fa-receipt"></i> Total y Desglose</h3>
                
                <ul class="desglose-lista">
                    <li class="desglose-item">
                        <span>Tarifa BÃ¡sica ({{ totalNoches }} noches)</span>
                        <span>{{ tarifaBasica | currency:'PEN':'symbol':'1.2-2' }}</span>
                    </li>
                    
                    <li class="desglose-item tax">
                        <span>Impuesto (IGV {{ impuesto * 100 }}%)</span>
                        <span>{{ montoImpuesto | currency:'PEN':'symbol':'1.2-2' }}</span>
                    </li>
                </ul>

                <div class="total-final">
                    <h4>Total a Pagar</h4>
                    <h4 class="precio-total"><strong>{{ totalPagar | currency:'PEN':'symbol':'1.2-2' }}</strong></h4>
                </div>
            </div>
            
        </div>
        
        <button 
            *ngIf="!reservaExitosa" 
            class="boton-pagar" 
            (click)="procesarPago()">
            Confirmar y Pagar Ahora
        </button>
    </div>
</div>